<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:f="http://java.sun.com/jsf/core"
	xmlns:jsf="http://xmlns.jcp.org/jsf" xmlns:h="http://java.sun.com/jsf/html" xmlns:c="http://java.sun.com/jsp/jstl/core"
	 xmlns:p="http://xmlns.jcp.org/jsf/passthrough" template="templates/default.xhtml"
>
<ui:define name="content">
	<script type="text/javascript">
    $(function () {
    	$('#datepicker').datepicker({
    	    todayBtn: true,
    	    format: "dd/mm/yyyy",
    	    language: "de",
    	    todayHighlight: true,
    	    calendarWeeks: true
    	});
    });
	  </script> 
		<div class="daynavbar">
		<h:form prependId="false">
			<div>
				<div class="left ">
					<button jsf:action="#{dayController.previous}">
						<span></span>
					</button>
				</div>
				<div class="middle input-group date" id="datepicker">
					<input type="text" jsf:id="date" value="#{dayController.selectedDate}">
						<f:converter converterId="at.bit.JsfLocalDateConverter"/>
						<f:ajax event="change" listener="#{dayController.gotoDate}" render="@all" />
					</input>
					<span class="input-group-addon"><i class="glyphicon glyphicon-th"></i></span>
				</div>
				<div class="right">
					<button jsf:action="#{dayController.newEvent}">
						<span class="new"></span>
					</button>
					<button jsf:action="#{dayController.next}">
						<span></span>
					</button>
				</div>
			</div>
		</h:form>
		</div>
		
		<table class="daytable" >
			<c:forEach items="#{dayController.hours}" var="hour">
				<ui:fragment rendered="#{dayController.events.size() ne 0}">
					<tr>
						<td class="">#{hour} Uhr</td>
						<ui:repeat var="data" value="#{dayController.events}">
							<ui:fragment rendered="#{data.startDateTime.hourOfDay eq hour}">
								<td rowspan="#{data.durationHours()}">
									<div class="eventblock" style="height: #{data.durationMinutes()}px; top:#{data.startDateTime.minuteOfHour}px;">
										<p>#{data.name}</p>
										<p>#{timeToStringConverter.convert(data.startDateTime)}-#{timeToStringConverter.convert(data.endDateTime)}</p>
									</div>
								</td>
							</ui:fragment>
							<ui:fragment rendered="#{hour lt data.startDateTime.hourOfDay or  hour gt data.endDateTime.hourOfDay}">
								<td></td>
							</ui:fragment>
						</ui:repeat>
					</tr>
				</ui:fragment>
				<ui:fragment rendered="#{dayController.events.size() eq 0}">
					<tr>
						<td class="">#{hour} Uhr</td>
						<td class=""></td>
					</tr>
				</ui:fragment>
			</c:forEach>
		</table>
<!-- 		</div> -->
	</ui:define>
</ui:composition>